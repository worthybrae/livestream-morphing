<!DOCTYPE html>
<html>
<head>
  <title>Live Stream</title>
  <style>
    body, html {
      margin: 0;
      height: 100%;
      overflow: hidden;
    }

    .video-container {
      position: relative;
      width: 100%;
      height: 100%;
    }

    video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .hidden {
      display: none;
    }
  </style>
</head>
<body>

<div class="video-container">
  <video id="video1" autoplay controls class="active"></video>
  <video id="video2" autoplay controls class="hidden"></video>
</div>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script>
  var video1 = document.getElementById('video1');
  var video2 = document.getElementById('video2');
  var hls1 = new Hls();
  var hls2 = new Hls();

  // Load initial stream in video1
  if (Hls.isSupported()) {
    hls1.loadSource('https://abbey-road.s3.amazonaws.com/current_playlist.m3u8');
    hls1.attachMedia(video1);
  } else if (video1.canPlayType('application/vnd.apple.mpegurl')) {
    video1.src = 'https://abbey-road.s3.amazonaws.com/current_playlist.m3u8';
  }

  video1.play();

  // Function to swap video elements
  function swapVideos() {
    if (video1.className === 'hidden') {
      video1.className = '';
      video2.className = 'hidden';
      hls1.loadSource('https://abbey-road.s3.amazonaws.com/current_playlist.m3u8');
      hls1.attachMedia(video1);
      video1.play();
    } else {
      video2.className = '';
      video1.className = 'hidden';
      hls2.loadSource('https://abbey-road.s3.amazonaws.com/current_playlist.m3u8');
      hls2.attachMedia(video2);
      video2.play();
    }
  }

  // Update stream every minute by swapping video sources
  setInterval(swapVideos, 60000);
</script>

</body>
</html>

